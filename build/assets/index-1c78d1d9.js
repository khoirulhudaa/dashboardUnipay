import{r as t,u as B,o as F,a as s,d as P,j as e,b as j,p as A}from"./index-74c1abb2.js";import{S as T}from"./alertBox-019922bb.js";import{B as d}from"./button-d24ad0c5.js";import{$ as M,T as $}from"./module-e9a8714f.js";import{i as E}from"./equal-f26f0b90.js";import{A as H}from"./api-e09118d0.js";import"./formatDate-90248bb2.js";import"./toRupiah-980d2178.js";const _=()=>{const{toPDF:p,targetRef:f}=M({filename:"table.pdf"}),[r,h]=t.useState(""),[n,x]=t.useState(""),[i,g]=t.useState(""),[S,y]=t.useState(!1),[b,v]=t.useState(!1),[N,c]=t.useState(!1),[u,w]=t.useState([]),C=B(),D=F(),{prodi:l}=D;return t.useEffect(()=>{(async()=>{try{const o=await H.getAllHistoryPayments(),k=o.data.data.filter(m=>m.prodi===l&&m.type_payment==="Sertifikasi");E(u,o.data.data)||(w(k),v(!1),y(!1),c(!1))}catch(o){console.log(o.message)}})()},[C,l,N,b]),s(P,{children:[s("div",{className:"panel",children:[s("div",{className:"flex flex-col mb-5 gap-5",children:[s("h5",{className:"font-semibold text-lg dark:text-white-light",children:["Data Sertifikasi (",l??"-",")"]}),s("div",{className:"flex items-center",children:[e("input",{type:"text",className:"form-input w-auto py-3 mr-3",placeholder:"Kode transaksi",value:r,onChange:a=>h(a.target.value)}),e("input",{type:"text",className:"form-input w-auto py-3 mr-3",placeholder:"Tahun ajaran",value:n,onChange:a=>x(a.target.value)}),e("input",{type:"text",className:"form-input w-auto py-3 mr-3",placeholder:"Kelas",value:i,onChange:a=>g(a.target.value)}),s("div",{className:"ml-auto flex items-center",children:[e(d,{onClick:()=>c(!0),text:"Muat ulang",typeButton:"with-icon",icon:e(j,{})}),e("div",{className:"mx-3"}),e(d,{onClick:()=>p(),method:"delete",typeButton:"with-icon",icon:e(A,{}),text:"Unduh PDF"})]})]})]}),e("div",{className:"datatables",children:e("div",{className:"flex-auto px-0 pt-0 pb-2",children:e("div",{className:"p-0 overflow-x-auto",children:e($,{prodi:l,targetRef:f,classRoom:i,year:n,code:r,columns:[{label:"NIM"},{label:"Nama"},{label:"Waktu"},{label:"Tahun"},{label:"Jumlah"},{label:"Kode"}],data:u})})})})]}),S&&T({text:"Berhasil daftar",title:"Success",confirmButtonText:"Lanjut",showCancelButton:!1,icon:"success"})]})};export{_ as default};
